<div class="mat-elevation-z4 transaction-table">
	<table mat-table
		[dataSource]="dataSource"
		multiTemplateDataRows
		matSort
	>
		<ng-container matColumnDef="amount">
			<th mat-header-cell
				mat-sort-header
				*matHeaderCellDef> Částka
			</th>
			<td mat-cell
				*matCellDef="let row"> {{row.amount}} Kč </td>

		</ng-container>

		<ng-container matColumnDef="type">
			<th mat-header-cell
				mat-sort-header
				*matHeaderCellDef> Typ
			</th>
			<td mat-cell
				*matCellDef="let row">
				<ng-container *ngIf="row.type === 'Payment'">Platba</ng-container>
				<ng-container *ngIf="row.type === 'Deposit'">Vklad</ng-container>
			</td>

		</ng-container>

		<ng-container matColumnDef="created">
			<th mat-header-cell
				mat-sort-header
				*matHeaderCellDef> Vytvořeno
			</th>
			<td mat-cell
				*matCellDef="let row"> {{row.created | date: 'dd/MM/yyyy HH:mm'}} </td>
		</ng-container>

		<ng-container matColumnDef="expandedDetail">
			<td mat-cell
				*matCellDef="let row"
				[attr.colspan]="displayedColumns.length">
				<div class="element-detail"
					[@detailExpand]="row === expandedRow ? 'expanded' : 'collapsed'"
				>
					<div class="detail-content d-flex justify-content-start align-items-center w-100">
						<span>Uživatel: {{ users[row.userId]?.name ?? '' }}</span>
					</div>
				</div>
			</td>
		</ng-container>

		<tr mat-header-row
			*matHeaderRowDef="displayedColumns"></tr>

		<tr mat-row
			*matRowDef="let row; columns: displayedColumns;"
			class="table-row"
			[class.expanded-row]="expandedRow === row"
			(click)="showDetail(row)"
		></tr>

		<tr mat-row
			*matRowDef="let row; columns: ['expandedDetail']"
			class="detail-row">
		</tr>
	</table>
	<mat-paginator [pageSizeOptions]="[5, 10, 20]"
		showFirstLastButtons
		aria-label="Select page of periodic elements">
	</mat-paginator>
</div>
